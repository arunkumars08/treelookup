var Steps=Steps||{},Storage=Storage||{};Storage=function(){var a={_setItem:function(a,b,c){window.localStorage&&window.localStorage.setItem(a,b)},_getItem:function(a,b){if(window.localStorage)return window.localStorage.getItem(a)},_removeItem:function(a){window.localStorage&&window.localStorage.removeItem(a)}},b={setItem:function(b,c){return a._setItem.apply(this,arguments)},getItem:function(b){return a._getItem.apply(this,arguments)},removeItem:function(b){return a._removeItem.apply(this,arguments)}};return b}(),Steps=function(){var i,j,a=[],b=new TreeLookup,c="/",d=1,e=[],f={},k={button:"",text:""},l={_init:function(){b=new TreeLookup,l._handleEvents()},_handleEvents:function(){k.button||(k.button=document.getElementById("searchBtn")),document.getElementById("search").focus(),k.button.addEventListener("click",l._handleClick)},_showError:function(){var a=document.getElementsByClassName("error-area")[0];a.innerHTML="";var b=document.createElement("div");b.classList.add("error-class"),b.innerHTML="Enter only numbers",a.appendChild(b),k.text.value="",setTimeout(function(){a.innerHTML=""},2e3)},_validateInput:function(a){return""===a||isNaN(a)},_handleClick:function(){if(e=[],j="",i||(i=document.getElementById("result")),k.text||(k.text=document.getElementById("search")),d=k.text.value,d=d.trim(),l._validateInput(d))return void l._showError();var a=f[d];if(a)l._displayMessage(null!==a,a);else{var b=new Promise(l._traverseTree);console.log("Using promise"),b.then(function(a){f[d]=c,l._displayMessage(!0,c)}).catch(function(a){f[d]=null,l._displayMessage(!1,null)})}},_updateRecents:function(){var a=document.createElement("span"),b=document.getElementById("recent"),c=Object.keys(f),d=c.length;b.innerHTML="";for(var e=0;e<d;++e)!function(d){a=document.createElement("span"),a.classList.add("recent-item"),a.innerText=c[d]+" -> "+f[c[d]],b.appendChild(a)}(e)},_displayMessage:function(a,b){i.innerHTML="The number: "+d+" that you have searched is "+(a?'found at: <span class="success_message bold_class">'+b+"</span>":"not found"),l._updateRecents()},_traverseTree:function(f,g){c="/",b.getChildrenAsCallback(c,function(i,j){function k(h){!function(h){c="/"!==h[0]?"/"+h:h,b.getChildrenAsPromise(c).then(function(b){e.push(c),0===b.length&&0===a.length?g():b.indexOf(d)!==-1?f(c):(b.length>0&&b.forEach(function(b){a.indexOf(b)===-1&&a.push(c+"/"+b)}),a.length>0&&k(a.shift()))})}(h)}a=j,a.indexOf(d)!==-1?f(c):k(a.shift())})}},m={init:function(){return l._init.apply(this,arguments)}};return m}(),window.onload=function(){Steps.init()};